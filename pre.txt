-- SERVICES
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Workspace = game:GetService("Workspace")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- Load Fluent UI
local Fluent = loadstring(game:HttpGet("https://raw.githubusercontent.com/LongThanhTz12/GUI-LIBARY-SCRIPT/refs/heads/main/guilibaryscript"))()

-- Create Main Window
local Window = Fluent:CreateWindow({
    Title = "Rez Hub üíÄ | Premium",
    SubTitle = "by rez",
    TabWidth = 160,
    Theme = "Dark",
    Acrylic = false,
    Size = UDim2.fromOffset(500, 320),
    MinimizeKey = Enum.KeyCode.F1
})

-- Tabs
local Tabs = {}
Tabs.Heal = Window:AddTab({ Title = "Tab Heal", Icon = "heart" })
Tabs.Boss = Window:AddTab({ Title = "Tab Boss", Icon = "sword" })

local AttackWeapon = nil
local AutoEquip = false
getgenv().AutoLayBangGac = false

-- üîò Ch·ªçn V≈© Kh√≠
local weaponButton = Tabs.Heal:AddButton({
    Title = "Ch·ªçn V≈© Kh√≠",
    Description = "V≈© Kh√≠ Hi·ªán T·∫°i : None",
    Callback = function()
        local weaponButtons = {}

        for _, tool in ipairs(LocalPlayer.Backpack:GetChildren()) do
            if tool:IsA("Tool") then
                table.insert(weaponButtons, {
                    Title = tool.Name,
                    Callback = function()
                        AttackWeapon = tool.Name
                        weaponButton:SetDesc("V≈© Kh√≠ Hi·ªán T·∫°i : " .. tool.Name)
                        print("‚úÖ V≈© kh√≠ ƒë√£ ch·ªçn: " .. tool.Name)
                    end
                })
            end
        end

        table.insert(weaponButtons, {
            Title = "‚ùå Tho√°t",
            Callback = function()
                print("ƒê√£ tho√°t ch·ªçn v≈© kh√≠.")
            end
        })

        Window:Dialog({
            Title = "Ch·ªçn V≈© Kh√≠",
            Content = "Ch·ªçn m·ªôt v≈© kh√≠:",
            Buttons = weaponButtons
        })
    end
})

-- üîÅ Auto Equip
Tabs.Heal:AddToggle("AutoEquipToggle", {
    Title = "Auto Equip sau m·ªói 7s",
    Description = "T·ª± trang b·ªã l·∫°i v≈© kh√≠ ƒë√£ ch·ªçn m·ªói 7 gi√¢y",
    Default = false,
    Callback = function(state)
        AutoEquip = state
        Fluent:Notify({
            Title = "‚öôÔ∏è Auto Equip",
            Content = state and "ƒê√£ b·∫≠t t·ª± trang b·ªã sau m·ªói 7s" or "ƒê√£ t·∫Øt t·ª± trang b·ªã",
            Duration = 3
        })
    end
})

spawn(function()
    while task.wait(7) do
        if AutoEquip and AttackWeapon then
            local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
            local backpack = LocalPlayer:FindFirstChild("Backpack")
            if not backpack then continue end

            local toolInBackpack = backpack:FindFirstChild(AttackWeapon)
            if toolInBackpack then
                toolInBackpack.Parent = character
                print("üîÅ [AutoEquip] ƒê√£ trang b·ªã l·∫°i: " .. AttackWeapon)
            else
                local equipped = character:FindFirstChild(AttackWeapon)
                if not equipped then
                    warn("‚ö†Ô∏è Kh√¥ng t√¨m th·∫•y v≈© kh√≠ '" .. AttackWeapon .. "' ƒë·ªÉ trang b·ªã l·∫°i.")
                end
            end
        end
    end
end)

-- üì¶ H√†m l·∫•y item t·ª´ balo
function GetBackpack(itemName)
    local Knit = ReplicatedStorage:WaitForChild("KnitPackages")
        :WaitForChild("_Index"):WaitForChild("sleitnick_knit@1.7.0")
        :WaitForChild("knit"):WaitForChild("Services")

    local InventoryService = Knit:WaitForChild("InventoryService"):WaitForChild("RE")
    InventoryService:WaitForChild("updateInventory"):FireServer("refresh")
    InventoryService:WaitForChild("updateInventory"):FireServer("eue", itemName)
end

-- üíä D√πng bƒÉng g·∫°c
function UseBandage()
    local tool = LocalPlayer.Backpack:FindFirstChild("bƒÉng g·∫°c") or LocalPlayer.Character:FindFirstChild("bƒÉng g·∫°c")
    if tool then
        if not LocalPlayer.Character:FindFirstChild("bƒÉng g·∫°c") then
            tool.Parent = LocalPlayer.Character
            task.wait(0.2)
        end

        if tool:FindFirstChild("RemoteEvent") then
            tool.RemoteEvent:FireServer()
        else
            tool:Activate()
        end

        task.delay(1, function()
            if AttackWeapon then
                local toolBack = LocalPlayer.Backpack:FindFirstChild(AttackWeapon)
                if toolBack then
                    toolBack.Parent = LocalPlayer.Character
                end
            end
        end)
    end
end

-- üîÉ Auto Heal Toggle
Tabs.Heal:AddToggle("AutoHealToggle", {
    Title = "‚ô•Ô∏è Auto Heal < 60",
    Default = false,
    Callback = function(state)
        AutoLayBangGac = state
        Fluent:Notify({
            Title = "‚ô•Ô∏è Auto Heal",
            Content = state and "ƒê√£ b·∫≠t auto heal khi m√°u < 60" or "ƒê√£ t·∫Øt auto heal",
            Duration = 3
        })
    end
})



-- üîÑ Auto Heal loop
spawn(function()
    while task.wait(1) do
        if AutoLayBangGac then
            local char = LocalPlayer.Character
            if char and char:FindFirstChild("Humanoid") and char.Humanoid.Health < 60 then
                local tool = char:FindFirstChild("bƒÉng g·∫°c") or LocalPlayer.Backpack:FindFirstChild("bƒÉng g·∫°c")
                if not tool then
                    local gui = LocalPlayer:FindFirstChild("PlayerGui")
                    if gui and gui:FindFirstChild("Inventory") then
                        gui.Inventory.Enabled = true
                        task.delay(2, function()
                            gui.Inventory.Enabled = false
                        end)
                    end
                    GetBackpack("bƒÉng g·∫°c")
                    task.wait(1.5)
                end
                UseBandage()
            end
        end
    end
end)

-- üîÅ Bi·∫øn tr·∫°ng th√°i auto mua
_G.AutoMuaBangGac = false

-- üõí H√†m g·ªçi mua "bƒÉng g·∫°c" t·ª´ server
local function MuaBangGac()
    local shopService = ReplicatedStorage:WaitForChild("KnitPackages")._Index["sleitnick_knit@1.7.0"]
        .knit.Services.ShopService.RE:WaitForChild("buyItem")
    shopService:FireServer("bƒÉng g·∫°c", 5)
    print("üõí ƒê√£ mua 5 bƒÉng g·∫°c.")
end

-- ‚è≤Ô∏è V√≤ng l·∫∑p: m·ªói 5 ph√∫t mua 1 l·∫ßn
spawn(function()
    while true do
        if _G.AutoMuaBangGac then
            MuaBangGac()
        end
        task.wait(30) -- 5 ph√∫t
    end
end)

-- üîò Toggle UI trong Fluent
Tabs.Heal:AddToggle("AutoMuaBangGac", {
    Title = "üõí Auto Mua BƒÉng G·∫°c (30s)",
    Description = "T·ª± ƒë·ªông mua 5 bƒÉng g·∫°c m·ªói 30s",
    Default = false,
    Callback = function(state)
        _G.AutoMuaBangGac = state
        Fluent:Notify({
            Title = "Auto Mua BƒÉng G·∫°c",
            Content = state and "ƒê√£ b·∫≠t (m·ªói 5 ph√∫t)" or "ƒê√£ t·∫Øt",
            Duration = 3
        })
    end
})


Tabs.Boss:AddToggle("AutoHealToggle", {
    Title = "Script Farm Boss Fix",
    Default = false,
    Callback = function(state)
        if state then
            -- Khi b·∫≠t toggle
            Fluent:Notify({
                Title = "Script Farm Boss",
                Content = "ƒê√£ ch·∫°y script",
                Duration = 3
            })

            -- Ch·∫°y script (v√≠ d·ª• l·∫•y t·ª´ link raw GitHub ho·∫∑c paste tr·ª±c ti·∫øp)
            loadstring(game:HttpGet("https://raw.githubusercontent.com/newbiezlol/bosspre/refs/heads/main/bosspre.txt"))()
            
        else
            -- Khi t·∫Øt toggle
            Fluent:Notify({
                Title = "Script Farm Boss",
                Content = "ƒê√£ t·∫Øt",
                Duration = 3
            })
        end
    end
})

-- T·ª± ƒë·ªông m√¥ ph·ªèng chu·ªôt/keyboard m·ªói 5 ph√∫t
LocalPlayer.Idled:Connect(function()
    VirtualUser:Button2Down(Vector2.new(0,0), Workspace.CurrentCamera.CFrame)
    wait(1)
    VirtualUser:Button2Up(Vector2.new(0,0), Workspace.CurrentCamera.CFrame)
end)

-- Th√¥ng b√°o
print("‚úÖ Anti-AFK ƒë√£ ƒë∆∞·ª£c b·∫≠t th√†nh c√¥ng!")

----------------------------------------
